var scriptOptions={scrolling_min_time:1300,scrolling_max_time:2100,min_views:-1,delete_from_next_txt:!0,output_name_type:2,adapt_text_output:!0,advanced:{get_array_after_scroll:!1,get_link_by_filter:!0,check_nullish_link:!0,log_link_error:!0}},height=document.body.scrollHeight,containerSets=[[],[]],skipLinks=[];function loadWebpage(){0===document.querySelectorAll(".tiktok-qmnyxf-SvgContainer").length?(window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),setTimeout(()=>{height!==document.body.scrollHeight?(scriptOptions.advanced.get_array_after_scroll||addArray(),setTimeout(()=>{height=document.body.scrollHeight,loadWebpage()},Math.floor(Math.random()*scriptOptions.scrolling_max_time+scriptOptions.scrolling_min_time))):setTimeout(()=>{0===document.querySelectorAll(".tiktok-qmnyxf-SvgContainer").length&&height==document.body.scrollHeight?ytDlpScript():loadWebpage()},3500)},150)):setTimeout(function(){loadWebpage()},1e3)}function addArray(){for(var e=document.querySelectorAll(".tiktok-x6y88p-DivItemContainerV2"),t=0;t<e.length;t++){var r=scriptOptions.advanced.get_link_by_filter?Array.from(e[t].querySelectorAll("a")).filter(e=>e.href.indexOf("/video/")!==-1)[0]?.href:(e[t].querySelector("[data-e2e=user-post-item-desc]")??e[t].querySelector("[data-e2e=user-liked-item]")??e[t].querySelector("[data-e2e=music-item]")??e[t].querySelector("[data-e2e=user-post-item]")??e[t].querySelector("[data-e2e=favorites-item]")??e[t].querySelector("[data-e2e=challenge-item]")).querySelector("a")?.href;if(scriptOptions.advanced.check_nullish_link&&(r??"")===""){scriptOptions.advanced.log_link_error&&console.log("SCRIPT ERROR: Failed to get link!");continue}-1===containerSets[0].indexOf(r)&&-1===skipLinks.indexOf(r)&&(containerSets[0].push(r),containerSets[1].push((e[t].querySelector("[data-e2e=video-views]")?.innerHTML??"0").replace("K","00").replace("M","00000")))}}function sanitizeName(e){return e.replaceAll("<","‹").replaceAll(">","›").replaceAll(":","∶").replaceAll('"',"″").replaceAll("/","∕").replaceAll("\\","∖").replaceAll("|","\xa6").replaceAll("?","\xbf").replaceAll("*","")}function ytDlpScript(){addArray();for(var e="",t=0;t<containerSets[0].length;t++)parseInt(containerSets[1][t])<scriptOptions.min_views||(e+=`${containerSets[0][t]}
`);downloadScript(e)}function downloadScript(e){var t=new Blob([e],{type:"text/plain"}),r=document.createElement("a"),i="TikTokLinks.txt";switch(scriptOptions.output_name_type){case 0:i=document.querySelector("[data-e2e=user-title]")?.textContent.trim()??document.querySelector("[data-e2e=browse-username]")?.firstChild?.textContent.trim()??document.querySelector("[data-e2e=browse-username]")?.textContent.trim()??document.querySelector("[data-e2e=challenge-title]")?.textContent.trim()??document.querySelector("[data-e2e=music-title]")?.textContent.trim()??"TikTokLinks.txt";break;case 1:i=`${document.title.substring(0,document.title.indexOf(" | TikTok"))}.txt`;break;case 2:i=`${document.querySelector("h1")?.textContent.trim()??"TikTokLinks"}.txt`}"string"==typeof scriptOptions.output_name_type&&(i=scriptOptions.output_name_type),scriptOptions.adapt_text_output&&(i=sanitizeName(i)),r.href=URL.createObjectURL(new File([t],i,{type:"text/plain"})),r.download=i,r.click(),URL.revokeObjectURL(r.href)}function requestTxtNow(){ytDlpScript(),scriptOptions.delete_from_next_txt&&(skipLinks.push(...containerSets[0]),containerSets=[[],[]])}function startDownload(e){(e??"")!==""&&(scriptOptions.output_name_type=e),loadWebpage()}startDownload();